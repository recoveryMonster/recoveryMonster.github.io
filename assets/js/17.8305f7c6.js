(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{388:function(t,s,a){"use strict";a.r(s);var e=a(19),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"浏览器-文档-事件-接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器-文档-事件-接口"}},[t._v("#")]),t._v(" 浏览器：文档，事件，接口")]),t._v(" "),a("h2",{attrs:{id:"dom-相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dom-相关"}},[t._v("#")]),t._v(" DOM 相关")]),t._v(" "),a("p",[t._v("对于特定的 DOM 节点，我们可以通过导航属性访问其相关的节点")]),t._v(" "),a("p",[t._v("这些属性主要分为两组：")]),t._v(" "),a("ul",[a("li",[t._v("对于所有节点："),a("code",[t._v("parentNode")]),t._v("，"),a("code",[t._v("childNodes")]),t._v("，"),a("code",[t._v("firstChild")]),t._v("，"),a("code",[t._v("lastChild")]),t._v("，"),a("code",[t._v("previousSibling")]),t._v("，"),a("code",[t._v("nextSibling")]),t._v("。")]),t._v(" "),a("li",[t._v("仅对于元素节点："),a("code",[t._v("parentElement")]),t._v("，"),a("code",[t._v("children")]),t._v("，"),a("code",[t._v("firstElementChild")]),t._v("，"),a("code",[t._v("lastElementChild")]),t._v("，"),a("code",[t._v("previousElementSibling")]),t._v("，"),a("code",[t._v("nextElementSibling")]),t._v("。")])]),t._v(" "),a("p",[a("strong",[t._v("兄弟节点相关问题")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("如果 elem 是任意一个 "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DOM")]),t._v(" 元素节点……\nelem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nextSibling 值一直都是 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("，这个判定是不是真的？\nelem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("previousSibling 值一直都是 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("，这个判定是不是真的？\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("、这是真的，因为 elem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastChild 就是最后一个节点，他没有 nextSibling\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("、错误，因为 elem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" 为其第一个子元素，它前面可能存在非元素节点，\n因此其 previousSibling 可能为一个文本节点\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h3",{attrs:{id:"搜索"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搜索"}},[t._v("#")]),t._v(" 搜索")]),t._v(" "),a("p",[t._v("除了 "),a("code",[t._v("getElementsBy*")]),t._v(" 和 "),a("code",[t._v("querySelector*")]),t._v(" 方法进行搜索外，"),a("code",[t._v("querySelectorAll")]),t._v(" 返回的是一个"),a("strong",[t._v("静态的")]),t._v("集合。")]),t._v(" "),a("p",[t._v("我们可以使用 "),a("a",{attrs:{href:"http://dom.spec.whatwg.org/#dom-element-matches",target:"_blank",rel:"noopener noreferrer"}},[t._v("elem.matches(css)"),a("OutboundLink")],1),t._v(" 来检查 "),a("code",[t._v("elem")]),t._v(" 是否与给定的 CSS 选择器匹配，返回 "),a("code",[t._v("true")]),t._v(" 或 "),a("code",[t._v("false")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://example.com/file.zip"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://ya.ru"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不一定是 document.body.children，还可以是任何集合")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" elem "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("matches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a[href$=\"zip\"]'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The archive reference: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" elem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[a("code",[t._v("elem.closest(css)")]),t._v(" 方法会查找与 CSS 选择器匹配的最近的祖先")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Contents"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"contents"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"book"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chapter"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Chapter "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chapter"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Chapter "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" chapter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.chapter'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// LI")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chapter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("closest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.book'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// UL")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chapter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("closest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.contents'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DIV")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chapter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("closest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'h1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// null（因为 h1 不是祖先）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("p",[a("code",[t._v("elemA.contains(elemB)")]),t._v(" 可以检查子级与父级之间关系的方法。")]),t._v(" "),a("p",[a("code",[t._v("DOM")]),t._v(" 节点类的继承关系，如下所示")]),t._v(" "),a("p",[a("img",{attrs:{src:"/js/dom-node.png",alt:"dom-node"}})]),t._v(" "),a("p",[t._v("针对一个节点，可以通过 "),a("code",[t._v("tagName")]),t._v(" 或者 "),a("code",[t._v("nodeName")]),t._v(" 来读取其元素节点名称或节点名称。")]),t._v(" "),a("h3",{attrs:{id:"特性和属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特性和属性"}},[t._v("#")]),t._v(" 特性和属性")]),t._v(" "),a("p",[t._v("如果一个特性不是标准的，那么就没有相对应的 DOM 属性。如 "),a("code",[t._v("type")]),t._v(" 是 "),a("code",[t._v("<input>")]),t._v(" 的一个标准的特性，但对于 "),a("code",[t._v("<body>")]),t._v(" 来说却不是。")]),t._v(" "),a("p",[t._v("所有的特性可以通过以下方法来进行访问：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("elem.hasAttribute(name)")]),t._v(" — 检查特性是否存在。")]),t._v(" "),a("li",[a("code",[t._v("elem.getAttribute(name)")]),t._v(" — 获取这个特性值。")]),t._v(" "),a("li",[a("code",[t._v("elem.setAttribute(name, value)")]),t._v(" — 设置这个特性值。")]),t._v(" "),a("li",[a("code",[t._v("elem.removeAttribute(name)")]),t._v(" — 移除这个特性")]),t._v(" "),a("li",[a("code",[t._v("elem.attributes")]),t._v(" — 读取所有特性，其返回具有 "),a("code",[t._v("name")]),t._v(" 和 "),a("code",[t._v("value")]),t._v(" 属性的对象集合")])]),t._v(" "),a("p",[t._v("特性名称是大小写不敏感的，"),a("strong",[t._v("所有以 “data-” 开头的特性均被保留供程序员使用。它们可在 "),a("code",[t._v("dataset")]),t._v(" 属性中使用。")])]),t._v(" "),a("h3",{attrs:{id:"元素滚动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#元素滚动"}},[t._v("#")]),t._v(" 元素滚动")]),t._v(" "),a("p",[t._v("元素滚动相关属性的整体图片如下图：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/js/scroll-property.png",alt:"scroll"}})]),t._v(" "),a("p",[a("strong",[t._v("注意")]),t._v("：除了 "),a("code",[t._v("scrollTop")]),t._v(" 和 "),a("code",[t._v("scrollLeft")]),t._v(" 可以改变外，其他属性都为只读属性")]),t._v(" "),a("p",[a("strong",[t._v("CSS width 与 clientWidth 的不同点")])]),t._v(" "),a("ol",[a("li",[a("code",[t._v("clientWidth")]),t._v(" 值是数值，而 "),a("code",[t._v("getComputedStyle(elem).width")]),t._v(" 返回一个以 "),a("code",[t._v("px")]),t._v(" 作为后缀的字符串。")]),t._v(" "),a("li",[a("code",[t._v("getComputedStyle")]),t._v(" 可能会返回非数值的 width，例如内联（inline）元素的 "),a("code",[t._v('"auto"')]),t._v("。")]),t._v(" "),a("li",[a("code",[t._v("clientWidth")]),t._v(" 是元素的内部内容区域加上 padding，而 CSS width（具有标准的 "),a("code",[t._v("box-sizing")]),t._v("）是内部内容区域，"),a("strong",[t._v("不包括 padding")]),t._v("。")]),t._v(" "),a("li",[t._v("如果有滚动条，并且浏览器为其保留了空间，那么某些浏览器会从 CSS width 中减去该空间（因为它不再可用于内容），而有些则不会这样做。"),a("code",[t._v("clientWidth")]),t._v(" 属性总是相同的：如果为滚动条保留了空间，那么将减去滚动条的大小。")])]),t._v(" "),a("h3",{attrs:{id:"window-滚动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#window-滚动"}},[t._v("#")]),t._v(" window 滚动")]),t._v(" "),a("p",[a("strong",[t._v("几何：")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("文档可见部分的 width/height（内容区域的 width/height）："),a("code",[t._v("document.documentElement.clientWidth/clientHeight")])])]),t._v(" "),a("li",[a("p",[t._v("整个文档的 width/height，其中包括滚动出去的部分：")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" scrollHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])])])]),t._v(" "),a("p",[a("strong",[t._v("滚动：")])]),t._v(" "),a("ul",[a("li",[t._v("读取当前的滚动："),a("code",[t._v("window.pageYOffset/pageXOffset")]),t._v("。")]),t._v(" "),a("li",[t._v("更改当前的滚动：\n"),a("ul",[a("li",[a("code",[t._v("window.scrollTo(pageX,pageY)")]),t._v(" — 绝对坐标，")]),t._v(" "),a("li",[a("code",[t._v("window.scrollBy(x,y)")]),t._v(" — 相对当前位置进行滚动，")]),t._v(" "),a("li",[a("code",[t._v("elem.scrollIntoView(top)")]),t._v(" — 滚动以使 "),a("code",[t._v("elem")]),t._v(" 可见（"),a("code",[t._v("elem")]),t._v(" 与窗口的顶部/底部对齐）。")])])])]),t._v(" "),a("h2",{attrs:{id:"事件简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件简介"}},[t._v("#")]),t._v(" 事件简介")]),t._v(" "),a("p",[t._v("分配事件处理程序有以下三种方式：")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("HTML 特性（attribute）："),a("code",[t._v('onclick="..."')]),t._v("。这里函数需要添加括号，因为浏览器在读取其属性的时候，会创建如下处理程序")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("button"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayThanks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("DOM 属性（property）："),a("code",[t._v("elem.onclick = function")]),t._v("。")])]),t._v(" "),a("li",[a("p",[t._v("方法（method）："),a("code",[t._v("elem.addEventListener(event, handler[, phase])")]),t._v(" 用于添加，"),a("code",[t._v("removeEventListener")]),t._v(" 用于移除。")])])]),t._v(" "),a("p",[a("code",[t._v("transtionend")]),t._v(" 和 "),a("code",[t._v("DOMContentLoaded")]),t._v(" 等少数事件必须使用第三种方法才可发生作用。无论 "),a("code",[t._v("addEventListener")]),t._v(" 怎样，DOM属性的处理程序都会触发，且先于 "),a("code",[t._v("addEventListener")]),t._v(" 触发事件。")]),t._v(" "),a("h3",{attrs:{id:"冒泡和捕获"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#冒泡和捕获"}},[t._v("#")]),t._v(" 冒泡和捕获")]),t._v(" "),a("p",[t._v("几乎所有事件都会“冒泡”，如 "),a("code",[t._v("focus")]),t._v(" 事件就不会冒泡")]),t._v(" "),a("p",[a("code",[t._v("event.stopPropagation()")]),t._v(" 阻止事件冒泡，但是当前元素上的其他处理程序都会继续运行。 "),a("code",[t._v("event.stopImmediatePropagation()")]),t._v(" 方法，不仅会阻止冒泡，还会阻止当前元素上其他处理程序的执行。")]),t._v(" "),a("p",[t._v("事件被阻止冒泡后，则不会被 "),a("code",[t._v("addEventListener")]),t._v(" 所监听。")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://www.w3.org/TR/DOM-Level-3-Events/",target:"_blank",rel:"noopener noreferrer"}},[t._v("DOM 事件"),a("OutboundLink")],1),t._v("标准描述了事件传播的 3 个阶段：")]),t._v(" "),a("ol",[a("li",[t._v("捕获阶段（Capturing phase）—— 事件（从 Window）向下走近元素。")]),t._v(" "),a("li",[t._v("目标阶段（Target phase）—— 事件到达目标元素。")]),t._v(" "),a("li",[t._v("冒泡阶段（Bubbling phase）—— 事件从元素上开始冒泡。")])]),t._v(" "),a("h3",{attrs:{id:"阻止浏览器行为"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#阻止浏览器行为"}},[t._v("#")]),t._v(" 阻止浏览器行为")]),t._v(" "),a("p",[t._v("有两种方式来告诉浏览器我们不希望它执行默认行为：")]),t._v(" "),a("ul",[a("li",[t._v("主流的方式是使用 "),a("code",[t._v("event")]),t._v(" 对象。有一个 "),a("code",[t._v("event.preventDefault()")]),t._v(" 方法。")]),t._v(" "),a("li",[t._v("如果处理程序是使用 "),a("code",[t._v("on<event>")]),t._v("（而不是 "),a("code",[t._v("addEventListener")]),t._v("）分配的，那返回 "),a("code",[t._v("false")]),t._v(" 也同样有效。")])]),t._v(" "),a("p",[t._v("如果默认行为被阻止，那么 "),a("code",[t._v("event.defaultPrevented")]),t._v(" 属性为 "),a("code",[t._v("true")]),t._v("，否则为 "),a("code",[t._v("false")])]),t._v(" "),a("h2",{attrs:{id:"ui-事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ui-事件"}},[t._v("#")]),t._v(" UI 事件")]),t._v(" "),a("h3",{attrs:{id:"鼠标事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#鼠标事件"}},[t._v("#")]),t._v(" 鼠标事件")]),t._v(" "),a("p",[t._v("鼠标事件有以下属性：")]),t._v(" "),a("ul",[a("li",[t._v("按钮："),a("code",[t._v("button")]),t._v("。")]),t._v(" "),a("li",[t._v("组合键（如果被按下则为 "),a("code",[t._v("true")]),t._v("）："),a("code",[t._v("altKey")]),t._v("，"),a("code",[t._v("ctrlKey")]),t._v("，"),a("code",[t._v("shiftKey")]),t._v(" 和 "),a("code",[t._v("metaKey")]),t._v("（Mac）。\n"),a("ul",[a("li",[t._v("如果你想处理 "),a("code",[t._v("ctrl")]),t._v("，那么不要忘记 Mac 用户，他们通常使用的是 "),a("code",[t._v("Cmd")]),t._v("，所以最好检查 "),a("code",[t._v("if (e.metaKey || e.ctrlKey)")]),t._v("。")])])]),t._v(" "),a("li",[t._v("窗口相对坐标："),a("code",[t._v("clientX/clientY")]),t._v("。")]),t._v(" "),a("li",[t._v("文档相对坐标："),a("code",[t._v("pageX/pageY")]),t._v("。")])]),t._v(" "),a("p",[a("code",[t._v("mousedown")]),t._v(" 的默认浏览器操作是文本选择，如果不想实现该行为，则应该避免它。如想在双击时，避免选中文本，我们可以像以下这么做。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("b ondblclick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"alert('Click!')\"")]),t._v(" onmousedown"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"return false"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("在有些网站里我们可以发先我们无法复制页面的内容，这是由于使用了 "),a("code",[t._v("oncopy")]),t._v(" 事件，并返回了 "),a("code",[t._v("false")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"鼠标移动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#鼠标移动"}},[t._v("#")]),t._v(" 鼠标移动")]),t._v(" "),a("p",[t._v("主要有 "),a("code",[t._v("mouseover")]),t._v("、"),a("code",[t._v("mouseout")]),t._v("、"),a("code",[t._v("mousemove")]),t._v("、"),a("code",[t._v("mouseenter")]),t._v(" 和 "),a("code",[t._v("mouseleave")]),t._v(" 事件")]),t._v(" "),a("p",[t._v("其中主要需要关注的有以下几点：")]),t._v(" "),a("ul",[a("li",[t._v("快速移动鼠标可能会跳过中间元素")]),t._v(" "),a("li",[a("code",[t._v("mouseover/out")]),t._v(" 和 "),a("code",[t._v("mouseenter/leave")]),t._v(" 事件还有一个附加属性："),a("code",[t._v("relatedTarget")]),t._v("。这就是我们来自/到的元素，是对 "),a("code",[t._v("target")]),t._v(" 的补充。")]),t._v(" "),a("li",[a("code",[t._v("mouseenter/leave")]),t._v(" 事件不会冒泡，元素内部与后代之间的转换不会产生影响。但是它们的通用性较差，如果我们想引入事件委托时，它则无法使用")])]),t._v(" "),a("p",[t._v("鼠标拖放事件详见"),a("a",{attrs:{href:"https://zh.javascript.info/mouse-drag-and-drop",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);