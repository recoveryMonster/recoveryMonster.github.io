(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{387:function(s,e,t){"use strict";t.r(e);var a=t(19),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"git时光穿梭机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git时光穿梭机"}},[s._v("#")]),s._v(" Git时光穿梭机")]),s._v(" "),t("p",[s._v("此为学习笔记，教学文档请移步"),t("a",{attrs:{href:"https://www.liaoxuefeng.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("廖雪峰的官方网站"),t("OutboundLink")],1),s._v("，本篇文章主要记录版本会退和恢复文件命令。")]),s._v(" "),t("p",[s._v("在git基础里面我们已经成功添加并提交了"),t("code",[s._v("readme.txt")]),s._v("文件,现在我们对文件进行修改：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707105112.png",alt:""}})]),s._v(" "),t("p",[s._v("现在使用"),t("code",[s._v("git status")]),s._v("查看结果")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('$ git status\nOn branch master\nChanges not staged for commit:\n  (use "git add <file>..." to update what will be committed)\n  (use "git checkout -- <file>..." to discard changes in working directory)\n\n        modified:   readme.txt\n\nno changes added to commit (use "git add" and/or "git commit -a")\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("font",{attrs:{color:"red"}},[t("strong",[s._v("git status")])]),s._v("命令用来查看仓库当前的状态，上面命令的输出告诉我们，"),t("code",[s._v("readme.txt")]),s._v("文件被修改过了，但还没有准备提交的修改。")],1),s._v(" "),t("p",[t("code",[s._v("git status")]),s._v("只是告诉我们有修改，我们可以通过"),t("code",[s._v("git diff")]),s._v("来查看具体的修改内容：")]),s._v(" "),t("p",[t("font",{attrs:{color:"red"}},[t("strong",[s._v("git diff  (file name)")])]),s._v("显示"),t("strong",[s._v("工作区")]),s._v("该文件与版本库中"),t("strong",[s._v("当前分支")]),s._v("下该文件的差异。")],1),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git diff\ndiff --git a/readme.txt b/readme.txt\nindex c3295f1..a440e5c 100644\n--- a/readme.txt\n+++ b/readme.txt\n@@ -1,2 +1,2 @@\n-git is a version controller system.\n+git is a distributed controller system.\n git is free software\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("strong",[s._v("详解：")])]),s._v(" "),t("ol",[t("li",[t("code",[s._v("diff --git a/readme.txt b/readme.txt")]),s._v("——对比两个文件，其中a改动前，b是改动后，以git的diff格式显示；")]),s._v(" "),t("li",[t("code",[s._v("index c3295f1..a440e5c 100644")]),s._v("——两个版本的git哈希值，index区域（add之后）的c3295f1对象和工作区域的a440e5c对象，100表示普通文件，644表示权限控制；")]),s._v(" "),t("li",[t("code",[s._v("--- a/readme.txt +++ b/readme.txt")]),s._v("——其中减号表示变动前，加好表示变动后。")]),s._v(" "),t("li",[t("code",[s._v("@@ -1,2 +1,2 @@")]),s._v("——@@表示文件变动描述合并显示的开始和结束，其中-+表示变动前后，逗号前是起始行位置，逗号后为从起始行往后几行。合起来就是变动前后都是从第1行开始，变动前文件往后数2行对应变动后文件往后数2行。")]),s._v(" "),t("li",[t("code",[s._v("-git is a version controller system. +git is a distributed controller system.")]),s._v("  ——+表示增加了这一行，-表示删除了这一行，没符号表示此行没有变动。")])]),s._v(" "),t("p",[s._v("知道对齐做了什么修改之后，我们就可以提交修改了，步骤与提交新文件一样，都是两个步骤，第一步"),t("code",[s._v("git add")])]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git add readme.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加成功后，我们可以使用"),t("code",[s._v("git status")]),s._v("查看当前仓库的状态")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('$ git status\nOn branch master\nChanges to be committed:\n  (use "git reset HEAD <file>..." to unstage)\n\n        modified:   readme.txt\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("上面的信息告诉我们将要被提交的修改为"),t("code",[s._v("readme.txt")]),s._v("，然后我们可以使用"),t("code",[s._v("git commit")]),s._v("进行提交。")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git commit -m 'version replaced by distributed in line 1'\n[master 2e0bdc4] version replaced by distributed in line 1\n 1 file changed, 1 insertion(+), 1 deletion(-)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("提交后，再次使用"),t("code",[s._v("git status")]),s._v("查看状态，")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git status\nOn branch master\nnothing to commit, working tree clean\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("git告诉我们，没有文件需要被提交，且工作目录是干净的。")]),s._v(" "),t("h2",{attrs:{id:"版本回退"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#版本回退"}},[s._v("#")]),s._v(" 版本回退")]),s._v(" "),t("p",[s._v("我们先再次修改一下"),t("code",[s._v("readme.txt")]),s._v(",并进行提交，修改内容如下：")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Git is a distributed version control system.\nGit is free software distributed under the GPL.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("提交如下：")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git add readme.txt\n$ git commit -m 'appened GPL'\n[master af61833] appened GPL\n 1 file changed, 2 insertions(+), 2 deletions(-)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"查看提交历史"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看提交历史"}},[s._v("#")]),s._v(" 查看提交历史")]),s._v(" "),t("p",[s._v("在git中我们可以通过"),t("code",[s._v("git log")]),s._v("命令来查看提交的历史记录")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("commit af6183376d218e36978735de48e9db0790fcb743 (HEAD -> master)\nAuthor: lf <781723804@qq.com>\nDate:   Sun Jul 7 15:03:24 2019 +0800\n\n    appened GPL\n\ncommit 2e0bdc40e2c63128b955fd0e6c3c3cadc895c684\nAuthor: lf <781723804@qq.com>\nDate:   Sun Jul 7 14:45:14 2019 +0800\n\n    version replaced by distributed in line 1\n\ncommit 1210adbed7497662a6a0c88bd53adb69e497df69\nAuthor: lf <781723804@qq.com>\nDate:   Sun Jul 7 01:44:27 2019 +0800\n\n    write a readme file\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[t("code",[s._v("git log")]),s._v("显示从近到远的提交日志，我们可以看到总共有3次提交，最近的一次是"),t("code",[s._v("appened GPL")]),s._v("，上一次是"),t("code",[s._v("version replaced by distributed in line 1")]),s._v("，最早的一次是"),t("code",[s._v("write a readme file")])]),s._v(" "),t("p",[s._v("也可以使用"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("git log --pretty=oneline")])]),s._v("而使一条记录显示一行")],1),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707151132.png",alt:""}})]),s._v(" "),t("p",[s._v("这里黄色的部分是"),t("code",[s._v("commit id")]),s._v("（版本号）是一个SHA1计算出来的一个非常大的数字，用十六进制表示。")]),s._v(" "),t("p",[s._v("每提交一个新版本，git会将它们自动串成一条时间线。")]),s._v(" "),t("h3",{attrs:{id:"回退到历史版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#回退到历史版本"}},[s._v("#")]),s._v(" "),t("a",{attrs:{id:"reset"}},[s._v("回退到历史版本")])]),s._v(" "),t("p",[s._v("如果我们想要把"),t("code",[s._v("readme.txt")]),s._v("回退到上一版本，也就是 "),t("code",[s._v("version replaced by distributed in line 1")]),s._v("那个版本，需要以下的步骤：")]),s._v(" "),t("p",[s._v("首先，必须知道当前版本，在Git中"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("HEAD")])]),s._v("表示当前版本，也就是"),t("code",[s._v("appened GPL")]),s._v("版本，想要到上一个版本，就是"),t("code",[s._v("HEAD ^")]),s._v("，上上个版本是"),t("code",[s._v("HEAD ^^")]),s._v(",如果是前10个版本，则可以用"),t("code",[s._v("HEAD~10")]),s._v(",")],1),s._v(" "),t("p",[s._v("我们需要使用"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("git reset")])]),s._v("进行版本回退")],1),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git reset --hard HEAD^\nHEAD is now at 2e0bdc4 version replaced by distributed in line 1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("code",[s._v("--hard")]),s._v("参数有啥意义？这个后面再讲，现在你先放心使用。")]),s._v(" "),t("p",[s._v("我们可以看看 "),t("code",[s._v("readme.txt")]),s._v("的内容是不是"),t("code",[s._v("version replaced by distributed in line 1")]),s._v("版本")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ cat readme.txt\ngit is a distributed controller system.\ngit is free software\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("我们可以看到已经还原到了上一个版本，这时我们使用"),t("code",[s._v("git log")]),s._v("查看版本库的状态")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707162122.png",alt:""}})]),s._v(" "),t("p",[s._v("最新版本的"),t("code",[s._v("append GPL")]),s._v("已经不见了，如果想要回到这个版本，则需要以下方法")]),s._v(" "),t("h3",{attrs:{id:"返回未来的版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#返回未来的版本"}},[s._v("#")]),s._v(" 返回未来的版本")]),s._v(" "),t("p",[s._v("想要恢复到"),t("code",[s._v("append GPL")]),s._v("的版本，则需要首先找到其"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("commit id")])]),s._v("（版本号），这时就需要"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("git reflog")])]),s._v("来查看git记录每一次的命令。")],1),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707162626.png",alt:""}})]),s._v(" "),t("p",[s._v("这时我们可以看到，"),t("code",[s._v("appened GPL")]),s._v("的版本号为"),t("code",[s._v("af61833")]),s._v("，然后我们使用"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("git reset --hard  （commit id）")])]),s._v("就可回到未来的某个版本号。")],1),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git reset --hard af61833\nHEAD is now at af61833 appened GPL\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("这是我们使用"),t("code",[s._v("cat")]),s._v("命令查看文件内容：")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ cat readme.txt\ngit is a distributed version controller system.\ngit is free software distributed under GPL\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("说明已经将版本转换回来，Git的版本回退速度非常快，因为Git在内部有个指向当前版本的"),t("font",{attrs:{color:"red"}},[s._v("HEAD")]),s._v("指针，当你回退版本的时候，Git仅仅是把HEAD从指向"),t("code",[s._v("version replaced by distributed in line 1")]),s._v("：")],1),s._v(" "),t("div",{staticClass:"language-ascii line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("┌────┐\n│HEAD│\n└────┘\n   │\n   │    ○ append GPL\n   │    │\n   └──> ○ version replaced by distributed in line 1\n        │\n        ○ wrote a readme file\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("改为指向"),t("code",[s._v("append GPL")])]),s._v(" "),t("div",{staticClass:"language-ascii line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("┌────┐\n│HEAD│\n└────┘\n   │\n   └──> ○ append GPL\n        │\n        ○ version replaced by distributed in line 1\n        │\n        ○ wrote a readme file\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h2",{attrs:{id:"工作区和暂存区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工作区和暂存区"}},[s._v("#")]),s._v(" 工作区和暂存区")]),s._v(" "),t("p",[s._v("Git与SVN等其他版本库的一个不同之处就是存在一个暂存区的概念。")]),s._v(" "),t("h3",{attrs:{id:"工作区-working-directory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工作区-working-directory"}},[s._v("#")]),s._v(" 工作区（Working Directory）")]),s._v(" "),t("p",[s._v("即电脑里能够看到的目录，如之前建立的"),t("code",[s._v("learngit")]),s._v("文件夹就是一个工作区。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707165214.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"版本库-repository"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#版本库-repository"}},[s._v("#")]),s._v(" 版本库（Repository）")]),s._v(" "),t("p",[s._v("工作区里面的隐藏目录"),t("font",{attrs:{color:"red"}},[s._v(".git")]),s._v("就是Git版本库。")],1),s._v(" "),t("p",[s._v("Git版本库里面最重要的就是称为"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("stage")])]),s._v("(或者叫index)的暂存区，还有Git为我们自动创建的第一个分支"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("master")])]),s._v("，以及的指针"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("HEAD")])]),s._v("指向"),t("code",[s._v("master")]),s._v("分支")],1),s._v(" "),t("p",[s._v("我们将文件提交到Git版本库时，是分两步进行的：")]),s._v(" "),t("ol",[t("li",[t("code",[s._v("git add")]),s._v("进行添加文件，实际上是将文件添加早暂存区；")]),s._v(" "),t("li",[t("code",[s._v("git commit")]),s._v("进行文件提交，实际是将 暂存区中的所有文件提交到当前分支。")])]),s._v(" "),t("p",[s._v("因为我们使用的是Git为我们自动创建的"),t("code",[s._v("master")]),s._v("分支，所以提交到的也是"),t("code",[s._v("master")]),s._v("分支")]),s._v(" "),t("p",[s._v("我们先对"),t("code",[s._v("readme.txt")]),s._v("文件进行修改，在最后一行添加如下内容：")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git is a distributed version controller system.\ngit is free software distributed under GPL.\ngit has a mutable index called stage.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("然后在工作区新建一个"),t("code",[s._v("license")]),s._v("文本文件，里面内容随便填写。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      先用"),t("code",[s._v("git status")]),s._v("查看版本库的状态")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('$ git status\nOn branch master\nChanges not staged for commit:\n  (use "git add <file>..." to update what will be committed)\n  (use "git checkout -- <file>..." to discard changes in working directory)\n\n        modified:   readme.txt\n\nUntracked files:\n  (use "git add <file>..." to include in what will be committed)\n\n        license.txt\n\nno changes added to commit (use "git add" and/or "git commit -a")\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("Git 告诉我们"),t("code",[s._v("readme.txt")]),s._v("文件被修改了，而"),t("code",[s._v("license.txt")]),s._v("文件还从来没有被提交过，所以其状态为"),t("code",[s._v("Untracked")]),s._v("。")]),s._v(" "),t("p",[s._v("现在使用两次命令"),t("code",[s._v("git add")]),s._v("之后，将"),t("code",[s._v("readme.txt")]),s._v("和"),t("code",[s._v("lincese.txt")]),s._v("文件都添加到暂存区后，使用"),t("code",[s._v("git status")]),s._v("查看状态")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('$ git status\nOn branch master\nChanges to be committed:\n  (use "git reset HEAD <file>..." to unstage)\n\n        new file:   license.txt\n        modified:   readme.txt\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("这时，暂存区变为如图所示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707192738.png",alt:""}})]),s._v(" "),t("p",[s._v("所以"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("git add")])]),s._v("相当于将要提交的修改添加到暂存区（stage）,然后通过"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("git commit")])]),s._v("将暂存区的所有修改提交到分支。")],1),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git commit -m 'how stage works'\n[master 35561ed] how stage works\n 2 files changed, 3 insertions(+), 1 deletion(-)\n create mode 100644 license.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("一旦提交之后，如果没有对工作区进行修改，则工作区就是“干净”的，类似于清空了购物车。")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git status\nOn branch master\nnothing to commit, working tree clean\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("这时暂存区中则没有任何内容：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707193211.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"管理修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#管理修改"}},[s._v("#")]),s._v(" 管理修改")]),s._v(" "),t("p",[t("font",{attrs:{color:"red"}},[s._v("Git跟踪管理的是修改，而不是文件。")]),s._v("这是Git比其他版本控制系统优秀的原因。")],1),s._v(" "),t("p",[s._v("例如，我们在"),t("code",[s._v("readme.txt")]),s._v("文件中天剑一行内容：")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ cat readme.txt\ngit is a distributed version controller system.\ngit is free software distributed under GPL.\ngit has a mutable index called stage.\ngit tracks change\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("然后添加：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707194524.png",alt:""}})]),s._v(" "),t("p",[s._v("然后再次修改"),t("code",[s._v("readme.txt")]),s._v("文件")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ cat readme.txt\ngit is a distributed version controller system.\ngit is free software distributed under GPL.\ngit has a mutable index called stage.\ngit tracks changes of files\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("提交：")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git commit -m 'git tracks changes'\n[master fada47f] git tracks changes\n 1 file changed, 1 insertion(+)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("查看状态")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('$ git status\nOn branch master\nChanges not staged for commit:\n  (use "git add <file>..." to update what will be committed)\n  (use "git checkout -- <file>..." to discard changes in working directory)\n\n        modified:   readme.txt\n\nno changes added to commit (use "git add" and/or "git commit -a")\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("这表明第二次修改并没有提交，当时的操作过程如下：")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("第一次修改 -> git add -> 第二次修改 -> git commit\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("由于Git管理的是修改，当第一次"),t("code",[s._v("git add")]),s._v("之后，第一次修改被添加到暂存区，准备提交，第二次修改并没有进行"),t("code",[s._v("git add")]),s._v("将修改添加到暂存区，因此"),t("code",[s._v("git commit")]),s._v("只是把暂存区的文件进行提交，也就是第一次修改文件。")]),s._v(" "),t("p",[s._v("提交后，可以使用"),t("font",{attrs:{color:"red"}},[s._v("git diff HEAD -- readme.txt")]),s._v("查看工作区和版本库里面最新版本的区别。")],1),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707195915.png",alt:""}})]),s._v(" "),t("p",[s._v("可见第二次修改并没有被提交。")]),s._v(" "),t("p",[s._v("可以在第二次修改完成后统一进行提交，也可以修改一次，进行一次"),t("code",[s._v("git add")]),s._v("。")]),s._v(" "),t("h2",{attrs:{id:"撤销修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#撤销修改"}},[s._v("#")]),s._v(" 撤销修改")]),s._v(" "),t("p",[s._v("当地随便在"),t("code",[s._v("readme.txt")]),s._v("文件下随便写了一行文字，")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ cat readme.txt\ngit is a distributed version controller system.\ngit is free software distributed under GPL.\ngit has a mutable index called stage.\ngit tracks changes of files\nmy lalla\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("在提交之前，你发现这行有错误，你可以删除掉最后一行，然后手动将文件恢复到上一个版本的状态，如果使用"),t("code",[s._v("git status")]),s._v("查看")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('$ git status\nOn branch master\nChanges not staged for commit:\n  (use "git add <file>..." to update what will be committed)\n  (use "git checkout -- <file>..." to discard changes in working directory)\n\n        modified:   readme.txt\n\nno changes added to commit (use "git add" and/or "git commit -a")\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("git会提示你"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("git checkout -- file")])]),s._v("可以丢弃工作区的修改")],1),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git checkout -- readme.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("命令"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("git checkout -- readme.txt")])]),s._v("文件的意思就是把，"),t("code",[s._v("readme.txt")]),s._v("文件在工作区的修该全部撤销，其中包括两种情况：")],1),s._v(" "),t("ol",[t("li",[t("code",[s._v("readme.txt")]),s._v("文件修改后，还没有添加到暂存区，则撤销修改回与版本库一样的状态")]),s._v(" "),t("li",[t("code",[s._v("readme.txt")]),s._v("文件已经添加到暂存区，之后又进行了修改，则撤销修改回添加到暂存区之后的状态。")])]),s._v(" "),t("p",[s._v("总之，就是让这个文件回到最近一次"),t("code",[s._v("git commit")]),s._v("或"),t("code",[s._v("git add")]),s._v("时的状态。")]),s._v(" "),t("p",[s._v("现在查看文件的状态：")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ cat readme.txt\ngit is a distributed version controller system.\ngit is free software distributed under GPL.\ngit has a mutable index called stage.\ngit tracks change\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("可以发现文件内容复原了。")]),s._v(" "),t("p",[s._v("如果添加了错误内容，并"),t("code",[s._v("git add")]),s._v("将其添加到暂存区域了，这是我们在使用"),t("code",[s._v("git status")]),s._v("查看状态")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707210952.png",alt:""}})]),s._v(" "),t("p",[s._v("Git告诉我们使用"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("git reset HEAD file")])]),s._v("可以把暂存区的修改撤销掉（unstage），重新放回到工作区")],1),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git reset HEAD readme.txt\nUnstaged changes after reset:\nM       readme.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("code",[s._v("git reset")]),s._v("命令既可以回退版本，也可以把暂存区的修改回退到工作区。当我们用"),t("code",[s._v("HEAD")]),s._v("时，表示最新的版本。")]),s._v(" "),t("p",[s._v("再次使用"),t("code",[s._v("git status")]),s._v("查看，可以看到暂存区是干净的，工作区有修改")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('$ git status\nOn branch master\nChanges not staged for commit:\n  (use "git add <file>..." to update what will be committed)\n  (use "git checkout -- <file>..." to discard changes in working directory)\n\n        modified:   readme.txt\n\nno changes added to commit (use "git add" and/or "git commit -a")\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("这时我们可以使用"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("git checkout -- file")])]),s._v("丢弃工作区的修改")],1),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707211819.png",alt:""}})]),s._v(" "),t("p",[s._v("如果已经提交到了版本库中，则需要使用"),t("a",{attrs:{href:"#reset"}},[s._v("版本回退")]),s._v("来撤销修改。前提是还没推送到远程库")]),s._v(" "),t("h2",{attrs:{id:"删除文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除文件"}},[s._v("#")]),s._v(" 删除文件")]),s._v(" "),t("p",[s._v("在Git中，删除也是一种操作，我们先添加一个"),t("code",[s._v("test.txt")]),s._v("文件并提交：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707214525.png",alt:""}})]),s._v(" "),t("p",[s._v("一般我们会在工作区中删除文件，或者在命令行使用"),t("code",[s._v("rm")]),s._v("命令删除文件")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707214641.png",alt:""}})]),s._v(" "),t("p",[s._v("这个时候Git知道删除了文件，所以工作区和版本库中文件不一致，可以使用"),t("code",[s._v("git status")]),s._v("来查看那些文件被删除了")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('$ git status\nOn branch master\nChanges not staged for commit:\n  (use "git add/rm <file>..." to update what will be committed)\n  (use "git checkout -- <file>..." to discard changes in working directory)\n\n        deleted:    test.txt\n\nno changes added to commit (use "git add" and/or "git commit -a")\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ol",[t("li",[t("p",[s._v("如果确实要删除此文件，根据提示可以使用"),t("code",[s._v("git add/rm file")]),s._v("删除，并使用"),t("code",[s._v("git commit")]),s._v("进行提交")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707215246.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/recoveryMonster/HexoImages/master/img/20190707215549.png",alt:""}})])])]),s._v(" "),t("p",[s._v("这时，文件就从版本库中删除了。")]),s._v(" "),t("p",[t("font",{attrs:{color:"blue"}},[s._v("小提示：先手动删除文件，然后使用git rm file和git add  file效果是一样的。")]),s._v("都将文件修改信息添加到了暂存区。")],1),s._v(" "),t("p",[s._v("2.不小心错误的删除了文件，因为版本库中还存在，所以我们可以很轻松的把文件回复到最新版本。")]),s._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ git checkout -- file\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("注意：从来没有被添加到版本库就被删除的文件，是无法恢复的！")])])])}),[],!1,null,null,null);e.default=n.exports}}]);